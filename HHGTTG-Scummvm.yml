name: The Hitchhikers Guide to the Galaxy
game_slug: the-hitchhikers-guide-to-the-galaxy
version: Installer
slug: installer
runner: scummvm


script:
  game:
    game_id: hhgttg
    path: $GAMEDIR

  installer:
    - write_file:
        content: '#!/bin/bash

        src=$1

        dst=$2

        src_path=$(echo "$1" | sed -r "s/(.+)\/.+/\1/")

        find "$src_path" -type f \( -iname "Hitchhik.DAT"  \) -exec cp {} "$dst" \;'
        file: $CACHE/selectcopy.sh

    - chmodx: $CACHE/selectcopy.sh

    - insert-disc:
        description: Please insert Lost Treasures of Infocom I CD
        requires: PC

    - execute:
        args: $DISC "$GAMEDIR"
        file: $CACHE/selectcopy.sh

    - execute:
        args: -R 775  "$GAMEDIR"
        file: /bin/chmod