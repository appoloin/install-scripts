name: The Longest Journey
game_slug: The-Longest-Journey
version: Installer
slug:  The-Longest-Journey-installer
runner: residualvm


script:
  game:
    game_id: tlj  
    path: $GAMEDIR
  
  installer:
    - write_file:
        content: '#!/bin/bash

        src=$1

        dst=$2
      
        cp -avr "$src/."  "$dst"'
        file: $CACHE/bulkcopy-alt.sh

    - chmodx: $CACHE/bulkcopy-alt.sh

    - insert-disc:
        description: Please insert disc
        requires: SETUP.EXE

    - task:
        name: wine.create_prefix
        arch: win32
        install_mono: false
        prefix: $GAMEDIR

    - task:
        name: wine.wineexec
        executable: $DISC/SETUP.EXE
        arch: win32
        prefix: $GAMEDIR

    - execute:
        args: "'$GAMEDIR/drive_c/Program Files/Funcom/The Longest Journey' '$GAMEDIR'"
        file: $CACHE/bulkcopy-alt.sh

    - execute:
        args: -R 775  $GAMEDIR
        file: /bin/chmod

    - execute:
        args: $GAMEDIR/configure.exe
        file: /bin/rm 

    - execute:
        args:  -r $GAMEDIR/drive_c
        file: /bin/rm 

    - execute:
        args:  -r $GAMEDIR/dosdevices
        file: /bin/rm 

    - execute:
        args:  -r $GAMEDIR/system.reg
        file: /bin/rm 

    - execute:
        args:  -r $GAMEDIR/user.reg
        file: /bin/rm 

    - execute:
        args:  -r $GAMEDIR/userdef.reg
        file: /bin/rm 
