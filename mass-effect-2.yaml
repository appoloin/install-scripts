name: Mass effect 2
game_slug: mass-effect-2
version: Installer
slug:  Mass-Effect-installer
runner: wine

script:
    game:
        arch: win32
        exe: $GAMEDIR/drive_c/Program Files/Mass Effect 2 Ultimate Edition/Binaries/MassEffect2.exe
        prefix: $GAMEDIR

    files:
      - setup: N/A:Select Setup.exe

    installer:    
      - task:
          arch: win32
          name: create_prefix
          install_mono: false
          install_gecko: false
          prefix: $GAMEDIR
      
      - task:
          description: Allow DirectX apps to stop the mouse leaving their window.
          key: GrabFullScreen
          name: set_regedit
          path: HKEY_CURRENT_USER\Software\Wine\X11 Driver
          prefix: $GAMEDIR
          value: Y
      - task:
          description: Deny the window manager to decorate the windows.
          key: Decorated
          name: set_regedit
          path: HKEY_CURRENT_USER\Software\Wine\X11 Driver
          prefix: $GAMEDIR
          value: N
      - task:
          description: Allow the window manager to control the windows.
          key: Managed
          name: set_regedit
          path: HKEY_CURRENT_USER\Software\Wine\X11 Driver
          prefix: $GAMEDIR
          value: Y
      - task:
          description: Enabling CSMT for better graphic performance.
          key: wined3d
          name: set_regedit
          path: HKEY_CURRENT_USER\Software\Wine\DllRedirects
          prefix: $GAMEDIR
          value: wined3d-csmt.dll
      - task:
          description: Enabling VAAPI as backend for DXVA2 GPU decoding.
          key: backend
          name: set_regedit
          path: HKEY_CURRENT_USER\Software\Wine\DXVA2
          prefix: $GAMEDIR
          value: va
      - task:
          app: d3dx9 d3dcompiler_42 physx
          description: Installing DirectX 9.
          name: winetricks
          prefix: $GAMEDIR
          
      - task:
          executable: $setup
          name: wineexec
          prefix: $GAMEDIR  

      - task:
          name: winekill
          prefix: $GAMEDIR

    wine:
        Desktop: true
        esync: false

 
