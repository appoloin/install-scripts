name: Assasssin's Creed Rogue
game_slug: assassins-creed-rogue
version: Installer
slug: INSTALLER
runner: wine

script:
  game:
    exe: $GAMEDIR/drive_c/game/
    prefix: $GAMEDIR

  files:
    - inno: https://lutris.nyc3.digitaloceanspaces.com/tools/innoextract/innoextract-1.8-dev-2019-01-13-linux.tar.xz
    - setup: N/A:Select installer
    - dx2010: https://lutris.net/files/tools/directx-2010.tar.gz


  installer:
    - task:
        name: create_prefix
        install_mono: false
        install_gecko: false
        prefix: $GAMEDIR

    - task:
        app: corefonts tahoma arial
        description: Installing corefonts
        name: winetricks
        prefix: $GAMEDIR

    - extract:
        dst: $CACHE/dxsetup
        file: dx2010

    - task:
        app: vcrun2008 vcrun2010 win7 d3dcompiler_43
        description: Installing Visual C++ librairies (2008 & 2010)
        name: winetricks
        prefix: $GAMEDIR

    - task:
        executable: $CACHE/dxsetup/DXSETUP.exe
        name: wineexec
        prefix: $GAMEDIR

    - extract:
        dst: $CACHE
        file: $inno 

    - execute:
        args: -I app -d "$GAMEDIR/drive_c/game" "$setup"
        file: $CACHE/innoextract

  wine:
    Desktop: true


