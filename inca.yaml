name: Inca
game_slug: inca
version: Installer
slug: inca
runner: dosbox

script:
    files:
      - DISC1: N/A:Select CD ISO/CUE/MP3

    game:
      main_file: $GAMEDIR/inca.conf

    installer:
      - write_file:
          content: '#!/bin/bash

          src=$1

          dst=$2
          
          src_path=$(echo "$1" | sed -r "s/(.+)\/.+/\1/")

          cp -avr "$src_path/."  "$dst"'
          file: $CACHE/bulkcopy.sh

      - chmodx: $CACHE/bulkcopy.sh

      - execute:
          args: $GAMEDIR/CDD $GAMEDIR/HDD
          file: mkdir

      - execute:
          args: $DISC1 $GAMEDIR/CDD
          file: $CACHE/bulkcopy.sh


      - write_file:
          content: '[midi]

          mididevice = mt32

          [sdl]

            capture_mouse=onclick middlerelease
          
          [autoexec]

            mount C "$GAMEDIR/HDD" -t dir

            imgmount d "$GAMEDIR/CDD/track01.cue" -t iso

            D:

            install
            
            exit'
          file: $GAMEDIR/setup.conf

      - task:
          config_file: $GAMEDIR/setup.conf
          name: dosexec
          working_dir: $GAMEDIR/HDD



      - write_file:
          content: '[midi]

          mididevice = mt32

          [sdl]

            capture_mouse=onclick middlerelease
            
            fullresolution=desktop

          windowresolution=original

          fullscreen=true

          output=opengl

        [render]

          aspect=true

          scaler=normal2x


          [autoexec]
          
          mount C "$GAMEDIR/HDD" -t dir

          imgmount d "$GAMEDIR/CDD/track01.cue" -t iso

          cls 

          ECHO OFF

          goto launcher

          :launcher

          cls 

          ECHO  -------------------------------------------  
          
          ECHO                     Inca
          
          ECHO  -------------------------------------------  
          
          ECHO   1) Play        
          
          ECHO   2) Setup    
          
          ECHO  -------------------------------------------  
          
          ECHO   3) Exit Program                             
          
          ECHO  -------------------------------------------  

          choice /c123 /s Which program do you want to run? [1-3]: /n 
          
          if errorlevel 3 goto exit

          if errorlevel 2 goto setup
          
          if errorlevel 1 goto game


          :game

          cls

          C:

          cd inca

          run

          goto exit


          :setup

          cls

          c:

          cd inca 
          
          setup
          
          goto launcher

        
          :exit
          
          exit'
          file: $GAMEDIR/inca.conf